<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="MauiAppDisertatieVacantaAI.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:MauiAppDisertatieVacantaAI.Pages"
    xmlns:pages="clr-namespace:MauiAppDisertatieVacantaAI.Pages"
    Shell.FlyoutBehavior="Flyout"
    Title="MauiAppDisertatieVacantaAI"
    Shell.BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource DarkGray}}"
    Shell.ForegroundColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource White}}"
    Shell.UnselectedColor="{AppThemeBinding Light={StaticResource MediumGray}, Dark={StaticResource TabUnselectedDark}}"
    Shell.DisabledColor="{AppThemeBinding Light={StaticResource LightGray}, Dark={StaticResource MediumGray}}"
    Shell.TitleColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource White}}"
    Shell.FlyoutBackgroundColor="{AppThemeBinding Light={StaticResource LightGray}, Dark={StaticResource MediumGray}}">

    <!-- Flyout Header with Home row just beneath banner -->
    <Shell.FlyoutHeader>
        <Grid RowDefinitions="Auto,Auto">
            <!-- Blue banner -->
            <Grid BackgroundColor="{StaticResource PrimaryBlue}" Padding="20,40" Grid.Row="0">
                <VerticalStackLayout Spacing="3" VerticalOptions="Center">
                    <Label Text="Vacation Planner AI"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="White" />
                    <Label x:Name="UserNameLabel"
                           Text="Welcome!"
                           FontSize="14"
                           TextColor="White"
                           Opacity="0.9" />
                </VerticalStackLayout>
                
            </Grid>

            <!-- Home tappable full-width row -->
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light={StaticResource LightGray}, Dark={StaticResource MediumGray}}">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHomeHeaderClicked" />
                </Border.GestureRecognizers>
                <Grid Padding="25,15" ColumnDefinitions="Auto,*" ColumnSpacing="14">
                    <Label Text="🏠"
                           FontSize="20"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource White}}" />
                    <Label Grid.Column="1"
                           Text="Home"
                           FontSize="16"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource White}}" />
                </Grid>
                
            </Border>
            
        </Grid>
    </Shell.FlyoutHeader>

    <!-- Flyout Footer (Settings / Logout / Meta) -->
    <Shell.FlyoutFooter>
        <VerticalStackLayout Spacing="1"
                             BackgroundColor="{AppThemeBinding Light={StaticResource LightGray}, Dark={StaticResource MediumGray}}">

            <BoxView HeightRequest="1"
                     Opacity="0.25"
                     Color="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource LightGray}}" />

            <!-- Settings Row -->
            <Border BackgroundColor="Transparent">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnSettingsClicked" />
                </Border.GestureRecognizers>
                <Grid Padding="25,15" ColumnDefinitions="Auto,*" ColumnSpacing="14">
                    <Label Text="⚙️"
                           FontSize="20"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource White}}" />
                    <Label Grid.Column="1"
                           Text="Settings"
                           FontSize="16"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource White}}" />
                </Grid>
            </Border>

            <!-- Logout Row -->
            <Border BackgroundColor="Transparent">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnLogoutClicked" />
                </Border.GestureRecognizers>
                <Grid Padding="25,15" ColumnDefinitions="Auto,*" ColumnSpacing="14">
                    <Label Text="🚪"
                           FontSize="20"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource LightGray}}" />
                    <Label Grid.Column="1"
                           Text="Logout"
                           FontSize="16"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource LightGray}}" />
                </Grid>
            </Border>

            <!-- Meta -->
            <Grid Padding="16,12" RowDefinitions="Auto,Auto">
                <Label x:Name="VersionLabel"
                       FontSize="13"
                       Opacity="0.8"
                       TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource LightGray}}" />
                <Label x:Name="CopyrightLabel"
                       Grid.Row="1"
                       FontSize="13"
                       Opacity="0.5"
                       TextColor="{AppThemeBinding Light={StaticResource DarkGray}, Dark={StaticResource LightGray}}" />
            </Grid>
        </VerticalStackLayout>
    </Shell.FlyoutFooter>

    <!-- Hidden routes -->
    <ShellContent
        Title="Splash"
        ContentTemplate="{DataTemplate pages:SplashPage}"
        Route="SplashPage"
        Shell.FlyoutItemIsVisible="False"
        Shell.FlyoutBehavior="Disabled" />

    <ShellContent
        Title="Login"
        ContentTemplate="{DataTemplate pages:LoginPage}"
        Route="LoginPage"
        Shell.FlyoutItemIsVisible="False"
        Shell.FlyoutBehavior="Disabled" />

    <!-- Settings (hidden for navigation) -->
    <ShellContent
        Title="Settings"
        ContentTemplate="{DataTemplate local:SettingsPage}"
        Route="SettingsPage"
        Shell.FlyoutItemIsVisible="False" />

    <TabBar>
        <ShellContent Title="Sugestii" ContentTemplate="{DataTemplate local:SugestiiPage}" Route="SugestiiPage" Icon="notes.png" />
        <ShellContent Title="Chat" ContentTemplate="{DataTemplate local:ChatPage}" Route="ChatPage" Icon="chat.png" />
        <ShellContent Title="Home" ContentTemplate="{DataTemplate local:MainPage}" Route="MainPage" Icon="home.png" />
        <ShellContent Title="Search" ContentTemplate="{DataTemplate local:SearchPage}" Route="SearchPage" Icon="search.png" />
        <ShellContent Title="Profile" ContentTemplate="{DataTemplate local:ProfilePage}" Route="ProfilePage" Icon="profile.png" />
    </TabBar>
</Shell>
